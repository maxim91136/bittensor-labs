# Release v1.0.0-rc.27 - Emission Calculation Fix & Halving Support

## Overview
Critical fix for emission rate calculation that was showing 752k TAO/day instead of ~7200. Added dynamic bounds that automatically adjust for future halvings.

## Fixed
- **Emission Calculation Bug**: The `emission_daily` calculation was missing the anomaly filter, causing corrupt data to produce wildly incorrect averages
- **History Sanitization**: Previous approach removed all samples after a corrupt one; now only the actual corrupt sample is removed
- **Sample Validation**: New samples are validated before being added to history (bounds, no decreases, max jump limit)

## Added
- **Dynamic Emission Bounds**: Filter automatically adjusts based on current halving level
- **Halving-Ready**: System will continue working correctly after each halving event without manual intervention

## Technical Details

### Dynamic Bounds by Halving Level
| Halving | Issuance Threshold | Expected Emission | Filter Range |
|---------|-------------------|-------------------|--------------|
| Pre-1   | < 10.5M TAO       | 7200 TAO/day      | 4320 - 10080 |
| Post-1  | ≥ 10.5M TAO       | 3600 TAO/day      | 2160 - 5040  |
| Post-2  | ≥ 15.75M TAO      | 1800 TAO/day      | 1080 - 2520  |
| Post-3  | ≥ 18.375M TAO     | 900 TAO/day       | 540 - 1260   |

### Sample Validation Rules
- Must be within realistic issuance bounds (10M - 15M TAO)
- Cannot decrease from previous sample (issuance only goes up)
- Cannot jump more than 1000 TAO per 15-minute interval

### Sanitization Logic
- When a drop is detected, the sample **before** the drop is removed (it was too high)
- This preserves the valid history instead of cascading deletions

## Commits
- `653aa54` feat: Dynamic emission bounds for halving support
- `b2480bd` fix: Improve sanitization to only remove actual corrupt samples
- `05bc563` fix: Validate samples and remove corrupt history entries
- `95e8bf4` fix: Add anomaly filter to emission_daily calculation
